# 🐳Next.js 13.54 + React 18 + MySQL + phpMyAdmin (Docker構成)

Next.js(App Router構成)+ MySQL + phpMyAdmin を  
Docker Compose で簡単に立ち上げられる開発環境です。  
案件に伴い、勉強用に作成しました。
メモ帳用途に使用してるので、クオリティの低さはご了承ください。

---

## 使用技術の概要

### Reactって何？
Meta(旧Facebook)が開発したUIライブラリです。  
**「ライブラリ」** というのは、便利な部品がたくさん入った道具箱のようなものです。

**Reactの特徴:**
- **コンポーネント単位** で画面を作ります
  - 「コンポーネント」= 画面の部品(ボタン、メニュー、カードなど)
  - 例: ヘッダー、サイドバー、記事カードなど、それぞれ独立した部品として作れる
- 一度作った部品は **何度でも再利用** できます
- ページ全体を読み込まなくても、必要な部分だけ **サクサク更新** できます(これがSPAの魅力)

**イメージ:**  
普通のWebサイト = 1ページずつ作る手作業  
React = レゴブロックのように部品を組み合わせて作る

---

### Next.jsって何？
Reactをもっと使いやすくするための **フレームワーク** です。  

**Next.jsの構造:**
- **フロントエンド(見た目)**: React
- **バックエンド(裏側の処理)**: Node.js

**Next.jsには4つのページ生成方法があります:**

| 方法 | いつHTMLが作られる？ | わかりやすく言うと | 使いどころ |
|------|---------------------|-------------------|------------|
| **CSR** | ユーザーのブラウザで | HTML をブラウザで作る方法。最初は空HTMLで画面遷移を全部 JavaScript で動かす |GmailやTwitter等 |
| **SSR** | ユーザーがアクセスした瞬間 | HTML をサーバーで作る方法。新鮮な情報をすぐ表示 | 最新ニュース、株価、天気予報、商品詳細 |
| **SSG** | サイトを公開する前 | サーバーが「事前に作っておく」方式。CDNからすぐ配るため爆速。| 会社紹介ページ、ブログ記事、ランディングページ |
| **ISR** | 事前に作る+定期的に更新 | SSG の欠点（更新されない）を解決するための自動更新付きSSG| 商品一覧(在庫が変わる)、人気記事ランキング |

React/Next.jsで作るサイトは、どの方式を選んでも最終的にはSPAとして動きます。  

**補足用語集:**

**SPA(Single Page Application - シングルページアプリケーション)**
- 最初に1回だけページを読み込んで、あとは中身だけを入れ替える仕組み
- ページがガクッと切り替わらず、スムーズに動きます
- 例: Gmail、Twitter、Instagram などのスマホアプリみたいな動き

**MPA(Multi Page Application - マルチページアプリケーション)**
- クリックするたびにページ全体を読み込み直す、昔ながらの方式
- 例: Yahoo! JAPANのトップページ → ニュースページへ移動すると画面全体が切り替わる

**CDN(Content Delivery Network - コンテンツデリバリーネットワーク)**
- サイトのデータを世界中のサーバーにコピーして配置する仕組み
- ユーザーの近くのサーバーから配信するので、どこからアクセスしても速い
- 例: 日本からアクセス → 日本のサーバーから、アメリカからアクセス → アメリカのサーバーから  

### ⚡**Next.js は “４つからどれか１つを選ぶ” んじゃなくて、ページごと・機能ごとに “全部ミックス” できるフレームワークです（ハイブリッドレンダリング）。 現在のところ、4つを一気に実現フレームワークは存在しません。**  

---

### Next.js 13 の2つの重要なコンポーネント

Next.js 13では、コンポーネントが **動く場所** によって役割が分かれています。

**1. Server Component(サーバーコンポーネント)**
- **サーバー側** で動く部品
- ページの土台や見た目を作る
- データベースからデータを取ってきたり、HTMLを生成したり

**2. Client Component(クライアントコンポーネント)**
- **ブラウザ側** で動く部品
- ユーザーの操作に反応する(ボタンクリック、入力、アニメーションなど)

**例えば、こんな構成:**
```
app/  
├─ page.js ← Server Component(ページの骨組みを作る、データを取得)  
└─ Button.js ← Client Component(ボタンをクリックしたら何か起こる)
```

---

## Next.js・React・TypeScript の関係

ここからさらに **TypeScript(タイプスクリプト)** という技術も学べます。  
今回は(私の頭がパンクしそうなので)導入していませんが、まずは **Next.js と React** の理解を優先しましょう。

### TypeScriptって何？
JavaScriptに **型チェック機能** を追加したものです。

**わかりやすい例:**
```javascript
// JavaScript(型なし) - 何でも入る
let age = "20歳";  // 文字列でもOK
age = 20;          // 数値でもOK

// TypeScript(型あり) - ルールを決める
let age: number = 20;     // 数値しか入らない
age = "20歳";             // エラー！数値じゃないとダメ
```

**TypeScriptのメリット:**
- コードを書いてる最中に **ミスを教えてくれる**
- 「この関数には数値を渡してね」など、**使い方がわかりやすくなる**
- チームで開発するとき、みんなが同じルールで書ける

**Laravelを知ってる人向けの例:**
- Laravel = Requestバリデーションで「実行時」にチェック
- TypeScript = 「コードを書いてる時点」でチェック

**イメージ:**
- JavaScript = 普通のペン(自由に書けるけど、間違いに気づきにくい)
- TypeScript = ガイド付きペン(はみ出したらすぐ教えてくれる)

---

### React・Next.js・TypeScriptの関係まとめ

**Reactだけでもアプリは作れます** が、Next.jsと組み合わせると、もっと効率的で実践的な開発ができます。

**おすすめの学習順序:**
1. **React** を学ぶ(基本のコンポーネントやHooksを理解)
2. **Next.js** を学ぶ(Reactをもっと便利に使う方法を理解)
3. **TypeScript** を学ぶ(余裕があれば、より安全なコードを書く)

**Next.jsでTypeScriptを使う場合:**
- Next.jsは最初からTypeScript対応してます
- 必要なパッケージを追加するだけでOK
- ファイルの拡張子を `.js` → `.tsx` に変えるだけ

---

## 学習用動画

ページ下部におすすめの学習動画リンクを掲載しています。  
環境構築が完了したら、順番に見ながら進めていきましょう。

---

## 環境概要

この開発環境では、以下の3つのサービスが同時に動きます:

| サービス | 何をするもの？ | アクセス先 |
|-----------|---------------|-----------|
| **web** | Next.js| http://localhost:3000 |
| **db** | MySQL | localhost:3253 |
| **phpmyadmin** | MySQL管理ツール | http://localhost:8022 |

---

## 必要なもの

開発を始める前に、以下の2つをインストールしておいてください:

- **Docker Desktop(WSL2対応版)**
  
- **Git**

---

## セットアップ手順

### ステップ1: コードをダウンロード

ターミナル(コマンドプロンプト)を開いて、以下を実行:

```bash
git clone https://github.com/fks-dev/next13react18.git
cd next13react18
```

---

### ステップ2: 設定を確認(必要に応じて変更)

`docker-compose.yml` というファイルを開くと、データベースの設定があります:

```yaml
MYSQL_ROOT_PASSWORD: password      # 管理者パスワード
MYSQL_DATABASE: next_app           # データベース名
MYSQL_USER: next_user              # ユーザー名
MYSQL_PASSWORD: password           # パスワード
```
最初はこのままでOKです。変更しなくても動きます。

---

### ステップ3: 環境を起動(初回のみ)

```bash
docker compose up -d --build
```

**何をしてるの？**
- `docker compose up` = 必要なサービスを全部起動
- `-d` = バックグラウンドで動かす(ターミナルを占領しない)
- `--build` = 必要なものをダウンロード&セットアップ

---

### 初回起動時の注意点

画面に `v` / `o` / `w` などの文字が表示されることがありますが、**これは正常です**。  
Docker Composeからのメッセージなので、そのまま閉じてOK。

ただし、この画面が出ている間は他の操作ができません。  
**Dockerを動かしたまま、他の作業をしたい場合:**

```bash
Ctrl + Z     # 一時停止(Dockerをバックグラウンドに移動)
bg           # バックグラウンドで再開
```

これで、Dockerは動いたまま、ターミナルが使えるようになります。

---

### ステップ4: 動いてるか確認

ブラウザで以下のURLを開いてみてください:

**Next.jsアプリ**  
http://localhost:3000  
→ 「Hello World」のような画面が表示されればOK

**phpMyAdmin(データベース管理ツール)**  
http://localhost:8022  
　
**ログイン情報:**
- サーバー: `db`
- ユーザー名: `root`
- パスワード: `password`

---

### ステップ5: コンテナの状態を確認(オプション)

ちゃんと動いてるか心配な方は、以下で確認できます:

```bash
docker ps
```

**何が表示される？**  
動いてるコンテナ(サービス)の一覧が表示されます。  
`web`、`db`、`phpmyadmin` の3つが表示されていればOK。

---

### ステップ6: 2回目以降の起動方法

一度セットアップしたら、次からは簡単です:

```bash
docker compose up -d
```

これだけで全部起動します。  
`--build` は初回だけでOK。

---

## ディレクトリ構成(ファイルの役割)

```
Next13React18/
├─ app/                        # Next.jsのメインフォルダ
│  ├─ page.js                  # トップページ(http://localhost:3000で表示される)
│  ├─ page.css                 # トップページのスタイル(見た目)
│  ├─ layout.js                # 全ページ共通の部分(ヘッダー、フッターなど)
│  └─ globals.css              # サイト全体のスタイル
├─ .dockerignore               # Dockerが無視するファイルのリスト
├─ .gitignore                  # Gitが追跡しないファイルのリスト
├─ docker-compose.yml          # Docker設定(何を起動するか書いてある)
├─ Dockerfile                  # Dockerの詳細設定
├─ next.config.mjs             # Next.jsの設定ファイル
├─ package.json                # 使ってるパッケージのリスト
├─ package-lock.json           # パッケージのバージョン固定
└─ README.md                   # このファイル(説明書)
```

---

## .jsと.jsxの違いって何？

Next.jsでは、`.js` ファイルの中に **JSX(HTMLのような書き方)** を書いても問題なく動きます。  
Next.jsが内部で自動的に変換してくれるからです。

### JSXって何？
JavaScriptの中にHTMLっぽいコードを書ける記法です。

```jsx
// こんな感じでHTMLっぽく書ける
function Hello() {
  return <h1>こんにちは！</h1>;
}
```

### .jsと.jsxの使い分け

| 拡張子 | 意味 | いつ使う？ |
|--------|------|-----------|
| **.js** | JavaScriptファイル | Next.jsプロジェクトで一般的。公式も.jsを使ってる |
| **.jsx** | React専用ファイル(明示) | 「これはReactコンポーネントだよ」と分かりやすくしたい時 |
| **.tsx** | TypeScript + JSX | TypeScriptを使う場合は必須 |

**プロジェクトによって違いがあります:**

どちらでも動きますが、プロジェクトのルールに合わせましょう。  
Next.jsの公式は `.js` を使ってるので、迷ったら `.js` でOK。

---

## DB接続テスト(データベースにつながるか確認)

`app/page.js` を開くと、MySQLに接続するサンプルコードがあります。

```js
import mysql from "mysql2/promise";

// MySQL接続
const conn = await mysql.createConnection({
    host: process.env.DB_HOST,        // 接続先(dbコンテナ)
    user: process.env.DB_USER,        // ユーザー名
    password: process.env.DB_PASSWORD, // パスワード
    database: process.env.DB_NAME,    // データベース名
});

// 現在時刻を取得
const [rows] = await conn.query("SELECT NOW() as now");
await conn.end();

// 画面に表示
現在時刻: {rows[0].now.toLocaleString("ja-JP", { timeZone: "Asia/Tokyo" })}
```

http://localhost:3000 にアクセスして、時刻が表示されていれば成功です。

---

## トラブルシューティング(困った時は)

### エラー: 

**症状:**  
`port is already allocated` みたいなエラーが出る

**原因:**  
他のアプリが同じポート(3000番や3306番)を使っている

**解決方法:**  
`docker-compose.yml` を開いて、ポート番号を変更:

```yaml
# 変更前
ports:
  - "3000:3000"

# 変更後(例)
ports:
  - "3333:3000"  # 左側の数字を変える
```

左側の数字 = PC側のポート  
右側の数字 = コンテナ内のポート(変えちゃダメ)

---

## 📘React学習(ここから勉強スタート)

以下の動画を順番に見ていくと、Reactの基本がしっかり身につきます。  
実務で使う前に一度見ておくと、コードの構造や考え方が理解できます。

### 1. まずは公式ドキュメントを読もう

**React 公式ドキュメント(日本語)**  
https://ja.react.dev/

**なぜ公式？**
- 最新で正確な情報
- 初心者向けのチュートリアルが充実
- 実際のコード例がたくさん

**全部読んだほうがいいです** 

---

### 2. 動画で実際に作ってみよう

**超初心者向け: Todoアプリを作ろう**  
[【React入門】完全初心者OK！１から簡単なTodoアプリを作ってReactの１歩を踏み出してみよう](https://www.youtube.com/watch?v=nRCNL9T3J98&t=471s)

**この動画のポイント:**
- 7分50秒あたりから、ファイル名とコードを合わせて説明してくれます
- 「やることリスト」アプリを実際に作りながら学べる
- 手を動かして作ると、一気に理解が深まります

**学べること:**
- コンポーネントの作り方
- 状態(state)の管理
- イベント処理(ボタンクリックなど)

---

### 3. React Hooksを理解しよう

**React Hooks入門**  
https://www.youtube.com/watch?v=uuAdVs7sbAs

**Hooksって何？**  
Reactで「状態管理」や「副作用処理」を簡単に書けるようにする機能です。

**よく使うHooks:**
- `useState` = 値を保存して、変更したら画面を更新
- `useEffect` = ページ読み込み時に1回だけ実行、など
- `useContext` = 深い階層にデータを渡す

**Next.jsでもHooksは必須** なので、ここでしっかり基本を押さえましょう。

**補足: Vite(ヴィート)について**  
この動画ではViteという環境を使っています。

**Viteって何？**
- React や Vue.js を**すぐに動かせる開発ツール**
- フレームワークではなく「ビルドツール」
- 特徴: とにかく速い(ノーバンドル方式)

実際の仕事でもViteは人気で採用されています。

---

## Next.js学習(Reactの次のステップ)

Reactの基本が分かったら、Next.jsに進みましょう。

### おすすめの進め方

1.  .jsの中身を**全部削除**
2. 動画と同じように、ゼロから書いていく
3. 8分20秒あたりから丁寧に解説してくれます

**Next.js 13入門 - App Router対応**  
[Next.js 13 入門 - App Router対応](https://www.youtube.com/watch?v=lO-Ulx1rclk&t=500s)

**この動画で学べること:**
- Next.js 13の新しい構造(`app/`ディレクトリ)
- Server ComponentとClient Componentの違い
- ルーティング(ページの追加方法)
- データ取得の方法

**Next.jsを初めて触る人に最適な動画です。**  
手を動かしながら進めると、全体の流れがしっかり理解できます。

---

## 🫛Vue.jsとNuxt.jsって何？(参考知識)

プログラミングを勉強していると、「Vue.js」や「Nuxt.js」という言葉を見かけることがあります。  
ここで簡単に説明しておきます。

### Vue.jsとは？

**Vue.js(ビュージェイエス)** は、Reactと同じく **UIライブラリ** です。ですがフレームワーク機能も備えています。

**Reactとの違い:**

| 特徴 | React | Vue.js |
|------|-------|--------|
| **書き方** | JSX(JavaScriptの中にHTML) | HTML・CSS・JSを分けて書ける |
| **学習難易度** | やや難しい | 初心者向け・直感的 |
| **自由度** | 高い(何でも自分で決める) | ある程度決まってる(迷わない) |
| **小規模導入** | 全体を作り直す必要あり | 1ページの一部だけでもOK |

**Vue.jsの強み:**
- HTMLに近い書き方なので、Web制作経験者には分かりやすい
- 既存のサイトに「ちょっとだけ動き」を追加したい時に便利
- 小規模サイトでよく使われる

**例え:**
- React = レゴブロック(自由に組み立てるけど、ルールは自分で決める)
- Vue.js = プラモデル(組み立て方が決まってるから、迷わず作れる)

---

### Nuxt.jsとは？

**Nuxt.js(ナクストジェイエス)** は、Vue.js用のフレームワークです。

**つまり:**
- React → Next.js
- Vue.js → Nuxt.js

という対応関係です。

---

### なぜ名前が似てるの？

開発者が「Vue版のNext.jsを作ろう！」と考えたからです。

**名前の由来:**
- **Next.js** = React の "Next"(次世代)
- **Nuxt.js** = "N" + "uxt" = Vue の Next

面白いネーミングですよね。起源が分かるとスッキリします。

---

### どっちが強いの？

「Nuxt.jsの方が後発だから強そう！」と思うかもしれません(私も最初そう思いました)。

**実際は:**
- **Next.js** = 自由度が高く、周辺ツールが豊富
- **Nuxt.js** = シンプルで扱いやすい

**Next.js採用企業(大手が多い):**
- Netflix(動画配信)
- Hulu(動画配信)
- Nike(スポーツ用品)
- Adidas(スポーツ用品)
- Uber(配車サービス)
- Starbucks(カフェ)

**Vue.js/Nuxt.js採用企業:**
- Nintendo 欧州サイト
- Xiaomi(中国のスマホメーカー)
- Alibaba(中国のECサイト)
- n8n(ドイツのSaaSサービス)

---

**Vue.js/Nuxt.jsが向いてる人:**
- Web制作(HTML/CSS)の経験がある
- 小規模なサイトをサクッと作りたい
- シンプルで分かりやすい方が好き

どちらも素晴らしい技術なので、**両方学んでおくと仕事の幅が広がります。**

---

## 最後に

まだ私自身も学習中なので、理解が深まったらちょくちょく更新していきます。  

**注意:**  
現在Next.jsは **14、15、16** までバージョンアップしています。  
15以降は大きな変更(破壊的アップデート)があったので、  
15以降を学ぶ方は、このREADMEの内容が参考にならない可能性があります。  
と、書いてありましたが、**13.5以降からは書き直しレベルの変更はほとんどない** とのことなのでご安心ください。  
気になる方は調べてみてください。

---

一緒に頑張りましょう！






